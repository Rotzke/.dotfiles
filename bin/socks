#!/bin/bash


case $1 in
    "manual"*)
        if [ `gsettings get org.gnome.system.proxy mode` == "'manual'" ];then echo -e $YELLOW'Tor proxy already enabled!'$NC && exit 1;fi && ping -c 1 8.8.8.8 &> /dev/null && gsettings set org.gnome.system.proxy mode $1 || echo -e $RED"[OFFLINE MODE]: Proxy unavailable"$NC
        ;;
    "none"*)
        if [ `gsettings get org.gnome.system.proxy mode` == "'none'" ];then echo -e $YELLOW'Tor proxy already disabled!'$NC && exit 1;fi && ping -c 1 8.8.8.8 &> /dev/null && gsettings set org.gnome.system.proxy mode $1 || echo -e $RED"[OFFLINE MODE]: Proxy unavailable"$NC
        ;;
    "reload"*)
        if [ `gsettings get org.gnome.system.proxy mode` == "'none'" ];then echo -e $YELLOW'Enable Tor proxy first!'$NC && exit 1;fi && ping -c 1 8.8.8.8 &> /dev/null && sudo service tor reload && echo -en $RED'Tor proxy reloaded!'$NC || echo -e $RED"[OFFLINE MODE]: Proxy unavailable"$NC
        ;;
    *)
        echo -ne $RED"No [$1] option! "$NC;echo "Use 'manual', 'none' or 'reload'"
        ;;
esac

